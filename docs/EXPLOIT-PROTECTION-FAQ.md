# Comprehensive FAQ: GMX V1 Exploit Protection

## Table of Contents
1. [Understanding the Exploit](#understanding-the-exploit)
2. [Our Protection Measures](#our-protection-measures)
3. [Economic Analysis](#economic-analysis)
4. [Technical Implementation](#technical-implementation)
5. [User Impact](#user-impact)
6. [Monitoring and Response](#monitoring-and-response)
7. [Future Considerations](#future-considerations)

---

## Understanding the Exploit

### Q: What was the GMX V1 exploit?
**A:** On July 9-10, 2025, attackers exploited GMX V1 on Arbitrum, stealing $40+ million. They manipulated `globalShortAveragePrices` through a re-entrancy vulnerability during position decreases, allowing them to mint GLP tokens at artificially low prices and immediately redeem them for profit.

### Q: How did the attackers bypass GMX's position limits?
**A:** While GMX had `maxGlobalShortSize` limits, attackers found multiple bypass methods:
- Calling the vault contract directly instead of using the position router
- Exploiting the `isLeverageEnabled` flag being true by default
- Using the timelock.enableLeverage mechanism during Keeper execution
- Taking advantage of re-entrancy windows where limits weren't checked

### Q: Why was the exploit so profitable?
**A:** Attackers could open positions worth $50+ million against similar-sized pools, creating 20-50% price manipulations. This massive distortion allowed profits exceeding 20% per attack cycle.

---

## Our Protection Measures

### Q: What specific limits have you implemented?
**A:** We've set strict position limits at the vault level:
- **All Shortable Assets**: Maximum $15,000 short positions per asset
- **Protected Assets**: WETH, WS, STS, Shadow, and Anon
- **Total Possible Shorts**: $75,000 across all five assets

This represents 10% of TVL per asset, with a maximum aggregate of 50% TVL.

### Q: How are these limits different from GMX's failed limits?
**A:** Key differences:
1. **Enforcement Level**: Our limits are set at the vault contract level
2. **No Bypasses**: The same limits apply regardless of entry point
3. **Proportional Sizing**: 20% of TVL vs GMX's unlimited practical sizes
4. **Economic Deterrent**: Makes attacks unprofitable rather than just "limited"

### Q: Can these limits be bypassed like GMX's were?
**A:** While we use the same base GMX V1 architecture with known vulnerabilities, the economic reality is different. Even if an attacker finds a bypass, they're still constrained by:
- Small absolute position sizes ($30k max)
- Limited pool manipulation potential (<5%)
- Negative expected returns after costs

---

## Economic Analysis

### Q: Walk me through why an attack wouldn't be profitable.
**A:** Let's analyze a maximum attack scenario:

```
Attack with $15,000 short position (any asset):
1. Maximum AUM impact: 15k/150k = 10% of TVL
2. Actual price manipulation: ~2-3% (due to averaging)
3. Potential arbitrage profit: 3% of $15k = $450
4. Less network fees (Sonic): -$50
5. Less position fees (0.3% × 2): -$90  
6. Less slippage/spread: -$150
7. Net profit: ~$160 (1.1% return)

Risk: $15,000 capital locked
Reward: $160 profit (likely less)
Success rate: Not guaranteed
```

### Q: Why is 1.1% return not attractive to attackers?
**A:** Several reasons:
1. **Opportunity Cost**: DeFi yields regularly offer 5-20% APR with less risk
2. **Capital Efficiency**: Locking $15k for uncertain 1% return is poor use of capital
3. **Technical Risk**: Complex attack could fail, losing gas and fees
4. **Detection Risk**: Unusual patterns easily spotted and could result in funds being frozen
5. **Better Targets**: Other protocols without limits offer higher potential returns

### Q: What if an attacker tries anyway?
**A:** We welcome them to try. They would:
- Provide fees to our protocol
- Increase our TVL temporarily  
- Likely lose money after all costs
- Help us identify any remaining vulnerabilities for future fixes

---

## Technical Implementation

### Q: How do you set these limits?
**A:** Through admin transactions to the Vault contract:
```solidity
vault.setMaxGlobalShortSize(token_address, size_with_decimals)
```
We've executed these for all five shortable assets: WETH, WS, STS, Shadow, and Anon.

### Q: Why not use setMaxGlobalLongSize?
**A:** This function doesn't exist in GMX V1. Long positions are limited through `maxUsdgAmount`, but we avoid this as it would also limit GLP/ALP minting. Since the exploit specifically uses shorts to manipulate prices, limiting shorts alone provides sufficient protection.

### Q: Does it matter that hackers used PositionRouter in the original exploit?
**A:** No. Even though the GMX exploit used PositionRouter to initiate the attack, all position operations ultimately execute through the Vault contract. The Vault checks `maxGlobalShortSize` regardless of entry point:
```
PositionRouter → Vault.increasePosition() → checks maxGlobalShortSize
```
This means our limits cannot be bypassed, even with re-entrancy vulnerabilities.

### Q: Are there other parameters you could adjust?
**A:** Yes, we could also:
- Increase spread basis points (makes trading more expensive)
- Raise margin fees (reduces profit margins)
- Adjust funding rates (makes holding positions costly)
- Reduce maximum leverage (limits position sizes)

Currently, position limits alone make attacks uneconomical.

### Q: What about the re-entrancy vulnerability itself?
**A:** The vulnerability remains in the code (as we're using GMX V1 architecture), but we've made it economically pointless to exploit. It's like leaving a safe with $10 inside - technically "vulnerable" but not worth attacking.

---

## User Impact

### Q: How do these limits affect normal trading?
**A:** For most users, minimal impact:
- **Small traders** (<$10k positions): No change
- **Medium traders** ($10-15k): Can still trade normally up to the limit
- **Large traders** (>$15k): Need to split positions across different assets
- **Liquidity providers**: No restrictions on GLP/ALP minting
- **Long positions**: Not affected by these short limits

### Q: Can I still use the yALP vault?
**A:** Yes! The yALP vault continues functioning normally. It's not subject to position limits as it provides liquidity rather than taking leveraged positions.

### Q: Will trading fees increase?
**A:** No. Current fee structures remain unchanged. We achieve protection through position limits rather than fee increases.

### Q: What if I need to open a larger position?
**A:** Options include:
1. Split across multiple assets (WETH, WS, USDC)
2. Use multiple transactions over time
3. Contact us for OTC arrangements for legitimate large trades

---

## Monitoring and Response

### Q: How do you monitor for attack attempts?
**A:** We track:
- Positions approaching limit thresholds (>80% of max)
- Rapid position open/close patterns
- Multiple positions from related addresses
- Unusual GLP minting/burning volumes
- Aggregate short interest spikes

### Q: What happens if an attack is attempted?
**A:** Our response plan:
1. **Immediate**: Alert sent to team
2. **Within 5 minutes**: Assess threat level
3. **If confirmed**: Can pause leverage trading
4. **Post-incident**: Analyze and adjust parameters

### Q: How quickly can you respond?
**A:** Our advantages:
- Small team = fast decision making
- Clear escalation procedures
- Pre-authorized emergency actions
- 24/7 monitoring capabilities

### Q: What if you need to lower limits further?
**A:** We can adjust limits within minutes through admin transactions. Users would be notified immediately through all official channels.

---

## Future Considerations

### Q: Will you fix the underlying vulnerability?
**A:** We're evaluating options:
1. **Current**: Parameter-based protection (implemented)
2. **Short-term**: Enhanced monitoring and alerts
3. **Medium-term**: Potential migration to GMX V2 architecture
4. **Long-term**: Custom solution addressing all known issues

### Q: Why not migrate to GMX V2 immediately?
**A:** Several considerations:
- GMX V2 requires significant changes to our yALP vault
- User education and migration complexity
- Current protection is effective and less disruptive
- Allows time for thorough V2 integration planning

### Q: What if new exploits are discovered?
**A:** Our defense strategy is adaptable:
- Parameters can be adjusted in real-time
- Emergency pause functionality exists
- Regular security reviews scheduled
- Bug bounty program planned

### Q: How can users stay informed?
**A:** Multiple channels:
- Official Twitter/X announcements
- Discord security channel
- On-chain parameter change events
- Email alerts for major updates (opt-in)

---

## Summary

### Q: In simple terms, why are we safe?
**A:** We've made the GMX V1 exploit economically impossible. Attackers would need to risk $15,000 to potentially make less than $200 - worse returns than a savings account. The Vault enforces these limits regardless of how positions are opened, making bypass impossible. Combined with high technical complexity and detection risk, it's simply not worth attempting.

### Q: What's the key takeaway?
**A:** While we share GMX V1's technical architecture, our economic parameters create a fundamentally different security profile. We've turned a catastrophic vulnerability into an unprofitable curiosity.

---

*Have additional questions? Contact our security team at [security contact]*
*Last updated: [Current Date]*